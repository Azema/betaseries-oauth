!function(t,e){"object"==typeof exports?module.exports=e(t):"function"==typeof define&&define.amd?define([],e):t.LazyLoad=e(t)}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";"function"==typeof define&&define.amd&&(e=window);const s={src:"data-src",srcset:"data-srcset",selector:".lazyload",root:null,rootMargin:"0px",threshold:0};function r(t,e){this.settings=Object.assign({},s,e||{}),this.images=t||document.querySelectorAll(this.settings.selector),this.observer=null,this.init()}if(r.prototype={init:function(){if(e.IntersectionObserver){let s=this;var t={root:this.settings.root,rootMargin:this.settings.rootMargin,threshold:[this.settings.threshold]};this.observer=new IntersectionObserver(function(t){Array.prototype.forEach.call(t,function(e){if(e.isIntersecting)if(s.observer.unobserve(e.target),"img"===e.target.tagName.toLowerCase())s.settings.attribute?s.preloadImg(e.target,s.settings.attribute):e.target.getAttribute(s.settings.src)?s.preloadImg(e.target,"src"):e.target.getAttribute(s.settings.srcset)&&s.preloadImg(e.target,"srcset");else{let t;s.settings.attribute?t=e.target.getAttribute(s.settings.attribute):e.target.getAttribute(s.settings.src)&&(t=e.target.getAttribute(s.settings.src)),t&&(e.target.style.backgroundImage=`url(${t})`)}})},t),Array.prototype.forEach.call(this.images,function(t){t.classList.contains("js-lazy-image-handled")||s.observer.observe(t)})}else this.loadImages()},fetchImg:function(r){return new Promise((t,e)=>{const s=new Image;s.src=r,s.onload=t,s.onerror=e})},applyImg:function(t,e,s){t.classList.add("js-lazy-image-handled"),t[s]=e,t.classList.add("fade-in")},preloadImg:function(e,s){const r=e.getAttribute(s);if(r&&0<r.length){const t=this.fetchImg(r);t.then(()=>this.applyImg(e,r,s.replace("data-",""))),this.settings.onerror&&"function"==typeof this.settings.onerror&&t.catch(t=>this.settings.onerror(t,e,r,s.replace("data-","")))}},loadAndDestroy:function(){this.settings&&(this.loadImages(),this.destroy())},loadImages:function(){if(this.settings){let r=this;Array.prototype.forEach.call(this.images,function(t){r.observer.unobserve(t);var e=t.getAttribute(r.settings.src),s=t.getAttribute(r.settings.srcset);"img"===t.tagName.toLowerCase()?r.settings.attribute?r.preloadImg(t,r.settings.attribute):e?r.preloadImg(t,"src"):s&&r.preloadImg(t,"srcset"):t.style.backgroundImage=`url(${e})`})}},destroy:function(){this.settings&&(this.observer.disconnect(),this.settings=null)}},e.lazyload=function(t,e){return new r(t,e)},e.jQuery){const i=e.jQuery;i.fn.lazyload=function(t){return(t=t||{}).attribute=t.attribute||"data-src",new r(i.makeArray(this),t),this}}return r});